(this["webpackJsonp3-phonebook"]=this["webpackJsonp3-phonebook"]||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),i=t(14),a=t.n(i),o=t(3),s=t(4),u=t.n(s),j=function(e){var n=e.person,t=e.handleDeleteButton;return Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{align:"left",children:n.name},n.id),Object(c.jsx)("th",{align:"left",children:n.number},n.number),Object(c.jsx)("th",{children:Object(c.jsx)("button",{onClick:function(){return t(n)},children:"delete"})})]})})},l=function(e){var n=e.persons,t=e.handleDeleteButton;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{align:"left",children:"Name"}),Object(c.jsx)("th",{align:"left",children:"Number"})]})}),n.map((function(e){return Object(c.jsx)(j,{person:e,handleDeleteButton:t},e.name)}))]})]})},d="/api/persons",b=function(){return u.a.get(d).then((function(e){return e.data}))},h=function(e){return u.a.post(d,e).then((function(e){return e.data}))},f=function(e,n){return u.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return u.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},m=function(e){var n=e.message,t=e.notificationClass;return null===n?null:Object(c.jsx)("div",{className:t,children:n})},x=function(e){var n=e.persons,t=e.setPersons,i=Object(r.useState)(""),a=Object(o.a)(i,2),s=a[0],u=a[1],j=Object(r.useState)(""),l=Object(o.a)(j,2),d=l[0],b=l[1],O=Object(r.useState)(null),x=Object(o.a)(O,2),p=x[0],v=x[1],g=Object(r.useState)("addNewPerson"),w=Object(o.a)(g,2),N=w[0],k=w[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)(m,{message:p,notificationClass:N}),Object(c.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),n.some((function(e){return e.name===s}))){var c=n.filter((function(e){return e.name===s}))[0];if(window.confirm("".concat(c.name," is already added to the phonebook, replace the old number with a new one?"))){var r={name:c.name,number:d};f(c.id,r).then((function(e){t(n.map((function(n){return n.id===e.id?e:n}))),u(""),b("")})).catch((function(e){k("error"),v("Information of ".concat(c.name," has already been removed from server")),setTimeout((function(){return v(null)}),5e3)}))}}else{h({name:s,number:d}).then((function(e){t(n.concat(e)),u(""),b(""),k("addNewPerson"),v("Added ".concat(e.name)),setTimeout((function(){return v(null)}),5e3)}))}},children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:s,onChange:function(e){u(e.target.value)}})]}),Object(c.jsxs)("div",{children:["Number: ",Object(c.jsx)("input",{value:d,onChange:function(e){b(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})]})},p=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],i=n[1],a=Object(r.useState)(""),s=Object(o.a)(a,2),u=s[0],j=s[1];Object(r.useEffect)((function(){b().then((function(e){i(e)}))}),[]);var d=u.length>0?t.filter((function(e){return e.name.includes(u)})):t;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:u,onChange:function(e){return j(e.target.value)}})]}),Object(c.jsx)("h3",{children:"Add a new person"}),Object(c.jsx)(x,{persons:t,setPersons:i}),Object(c.jsx)(l,{persons:d,handleDeleteButton:function(e){window.confirm("Delete ".concat(e.name," ?"))&&O(e.id).then((function(){i(t.filter((function(n){return n.id!==e.id})))}))}})]})},v=function(e){var n=e.initialPersons;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(p,{initialPersons:n})})};t(38);a.a.render(Object(c.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f2fa6220.chunk.js.map